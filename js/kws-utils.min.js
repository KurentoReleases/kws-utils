!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.kwsUtils=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
function defaultOnerror(e){console.error(e)}function WebRtcPeer(e,t,o,r,i,s){Object.defineProperty(this,"pc",{writable:!0}),this.localVideo=t,this.remoteVideo=o,this.onerror=i?i:defaultOnerror,this.stream=s,this.mode=e,this.onsdpoffer=r}WebRtcPeer.prototype.start=function(){var e=this;this.pc||(this.pc=new RTCPeerConnection(this.server,this.options));var t=this.pc;this.stream&&this.localVideo&&(this.localVideo.src=URL.createObjectURL(this.stream),this.localVideo.muted=!0),this.stream&&t.addStream(this.stream),this.constraints={mandatory:{OfferToReceiveAudio:void 0!==this.remoteVideo,OfferToReceiveVideo:void 0!==this.remoteVideo}},t.createOffer(function(o){console.log("Created SDP offer"),t.setLocalDescription(o,function(){console.log("Local description set")},e.onerror)},this.onerror,this.constraints),t.onicecandidate=function(o){if(!o.candidate){var r=t.localDescription.sdp;console.log("ICE negotiation completed"),e.onsdpoffer&&(console.log("Invokin SDP offer callback function"),e.onsdpoffer(r,e))}}},WebRtcPeer.prototype.dispose=function(){console.log("Disposing WebRtcPeer"),this.pc.close()},WebRtcPeer.prototype.userMediaConstraints={audio:!0,video:{mandatory:{maxWidth:640,maxFrameRate:15,minFrameRate:15}}},WebRtcPeer.prototype.constraints={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},WebRtcPeer.prototype.processSdpAnswer=function(e){var t=new RTCSessionDescription({type:"answer",sdp:e});console.log("SDP answer received, setting remote description");var o=this;o.pc.setRemoteDescription(t,function(){if(o.remoteVideo){var e=o.pc.getRemoteStreams()[0];o.remoteVideo.src=URL.createObjectURL(e)}},this.onerror)},WebRtcPeer.prototype.server={iceServers:[{url:"stun:stun.l.google.com:19302"}]},WebRtcPeer.prototype.options={optional:[{DtlsSrtpKeyAgreement:!0}]},WebRtcPeer.start=function(e,t,o,r,i,s,n){var c=new WebRtcPeer(e,t,o,r,i,n);if("recv"===c.mode||c.stream)c.start();else{var a=s?s:c.userMediaConstraints;getUserMedia(a,function(e){c.stream=e,c.start()},c.onerror)}return c},WebRtcPeer.startRecvOnly=function(e,t,o,r){return WebRtcPeer.start("recv",null,e,t,o,r)},WebRtcPeer.startSendOnly=function(e,t,o,r){return WebRtcPeer.start("send",e,null,t,o,r)},WebRtcPeer.startSendRecv=function(e,t,o,r,i){return WebRtcPeer.start("sendRecv",e,t,o,r,i)},module.exports=WebRtcPeer;
//# sourceMappingURL=kws-utils.map
},{}],2:[function(_dereq_,module,exports){
var WebRtcPeer=_dereq_("./WebRtcPeer");exports.WebRtcPeer=WebRtcPeer;
//# sourceMappingURL=kws-utils.map
},{"./WebRtcPeer":1}]},{},[2])

(2)
});

//# sourceMappingURL=kws-utils.map