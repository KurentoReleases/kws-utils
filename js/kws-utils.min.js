!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.kwsUtils=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
function defaultOnerror(e){console.error(e)}function WebRtcPeer(e,t,r,o,i,s){Object.defineProperty(this,"onsdpoffer",{writable:!0}),Object.defineProperty(this,"onerror",{writable:!0}),Object.defineProperty(this,"localVideo",{writable:!0}),Object.defineProperty(this,"remoteVideo",{writable:!0}),Object.defineProperty(this,"stream",{writable:!0}),Object.defineProperty(this,"pc",{writable:!0}),Object.defineProperty(this,"mode",{writable:!0}),this.localVideo=t,this.remoteVideo=r,this.onerror=i?i:defaultOnerror,this.stream=s,this.mode=e,this.onsdpoffer=o}WebRtcPeer.prototype.start=function(){var e=this;this.pc||(this.pc=new RTCPeerConnection(this.server,this.options));var t=this.pc;this.stream&&this.localVideo&&(this.localVideo.src=URL.createObjectURL(this.stream),this.localVideo.muted=!0),this.stream&&t.addStream(this.stream);var r={mandatory:{OfferToReceiveAudio:void 0!==this.remoteVideo,OfferToReceiveVideo:void 0!==this.remoteVideo}};t.createOffer(function(e){console.log("Created SDP offer"),t.setLocalDescription(e,function(){console.log("Local description set")},this.onerror)},this.onerror,r),t.onicecandidate=function(r){if(!r.candidate){var o=t.localDescription.sdp;console.log("ICE negotiation completed"),e.onsdpoffer&&(console.log("Invokin SDP offer callback function"),e.onsdpoffer(o,e))}}},WebRtcPeer.prototype.dispose=function(){console.log("Disposing WebRtcPeer"),this.stream&&this.pc.removeStream(this.stream),this.pc.close()},WebRtcPeer.prototype.processSdpAnswer=function(e){var t=new RTCSessionDescription({type:"answer",sdp:e});console.log("SDP answer received, setting remote description");var r=this;r.pc.setRemoteDescription(t,function(){if(r.remoteVideo){var e=r.pc.getRemoteStreams()[0];r.remoteVideo.src=URL.createObjectURL(e)}},this.onerror)},WebRtcPeer.prototype.server={iceServers:[{url:"stun:stun.l.google.com:19302"}]},WebRtcPeer.prototype.options={optional:[{DtlsSrtpKeyAgreement:!0}]},WebRtcPeer.start=function(e,t,r,o,i,s){var n=new WebRtcPeer(e,t,r,o,i,s);return"recv"===n.mode||n.stream?n.start():getUserMedia({audio:!0,video:!0},function(e){n.stream=e,n.start()},n.onerror),n},WebRtcPeer.startRecvOnly=function(e,t,r){return WebRtcPeer.start("recv",null,e,t,r)},WebRtcPeer.startSendOnly=function(e,t,r){return WebRtcPeer.start("send",e,null,t,r)},WebRtcPeer.startSendRecv=function(e,t,r,o){return WebRtcPeer.start("sendRecv",e,t,r,o)},module.exports=WebRtcPeer;
//# sourceMappingURL=kws-utils.map
},{}],2:[function(_dereq_,module,exports){
var WebRtcPeer=_dereq_("./WebRtcPeer");exports.WebRtcPeer=WebRtcPeer;
//# sourceMappingURL=kws-utils.map
},{"./WebRtcPeer":1}]},{},[2])

(2)
});

//# sourceMappingURL=kws-utils.map